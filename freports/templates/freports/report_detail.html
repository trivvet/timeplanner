{% extends "freports/base.html" %}
{% load get_item %}

{% block title %}
<h2>Детальна інформація про провадження №{{ report.number }}/017</h2>
{% endblock title %}

{% block content %}

<!-- Головні учасники справи -->
<div class="row" id="main-participants">
    <div class="col-sm-10">
        <table class="table table-sm table-responsive">
            <tbody>
                <tr>
                    <th scope="row">Суддя</th>
                    <td>
                        {% if participants.judge %}
                        {% for judge in participants.judge %}
                        <a class="no-style-link" href="{% url 'forensic_participant_detail' judge.id %}">
                            {{ judge.surname }} {{ judge.name }}</a>
                        {% endfor %}
                        {% else %}
                        <a class="no-style-link" href="{% url 'report_add_participant' report.id 'judge' %}"
                            style="color:red">Дані відсутні</a>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th scope="row">{% if participants.plaintiff|length > 1 %}Позивачі{% else %}Позивач{% endif %}</th>
                    <td>
                        {% if participants.plaintiff %}
                        {% for plaintiff in participants.plaintiff %}
                        <a class="no-style-link" href="{% url 'forensic_participant_detail' plaintiff.id %}">
                            {{ plaintiff.surname }} {{ plaintiff.name }}</a></br>
                        {% endfor %}
                        <a href="{% url 'report_add_participant' report.id 'plaintiff' %}" class="badge badge-info">Додати іншого позивача</a>
                        {% else %}
                        <a class="no-style-link" href="{% url 'report_add_participant' report.id 'plaintiff' %}"
                            style="color:red">Дані відсутні</a>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th scope="row">{% if participants.defendant|length > 1 %}Відповідачі{% else %}Відповідач{% endif %}</th>
                    <td>
                        {% if participants.defendant %}
                        {% for defendant in participants.defendant %}
                        <a class="no-style-link" href="{% url 'forensic_participant_detail' defendant.id %}">
                            {{ defendant.surname }} {{ defendant.name }}</a></br>
                        {% endfor %}
                        <a href="{% url 'report_add_participant' report.id 'defendant' %}" class="badge badge-info">Додати іншого відповідача</a>
                        {% else %}
                        <a class="no-style-link" href="{% url 'report_add_participant' report.id 'defendant' %}"
                            style="color:red">Дані відсутні</a>
                        {% endif %}
                    </td>
                </tr>
                {% for participant in participants.other %}
                <tr>
                    <th scope="row">{{ participant.status }}</th>
                    <td>
                        <a class="no-style-link" href="{% url 'forensic_participant_detail' participant.id %}">
                            {{ participant.surname }} {{ participant.name }}</a>
                    </td>
                </tr>
                {% endfor %}
                <tr>
                    <th scope="row"></th>
                    <td>
                        <a type="button" class="badge badge-info" id="add-button"
                            href="{% url 'report_add_participant' report.id 'other' %}">Додати іншого учасника провадження</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>



{% if details %}
<h3 class="event-header">Список подій</h3>
<table class="table table-hover table-bordered">
    <thead>
        <tr>
            <th>Дата</th>
            <th>Назва</th>
            <th>Детальна інформація</th>
            <th>Дії</th>
        </tr>
    </thead>

    <tbody>
        {% for detail in details %}
        <tr>
            <th scope="row">{{ detail.date }}</td>
            <td>{{ content|get_item:detail.name }}</td>
            <td>{{ detail.detail_info }}</td>
            <td>
                <div class="dropdown">
                    <button class="btn btn-info dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Дія
                    </button>
                    <div class="dropdown-menu" id="edit-event" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="{% url 'report_edit_detail' report.id detail.id %}">Редагувати</a>
                        <a class="dropdown-item" href="{% url 'report_delete_detail' report.id detail.id %}">Видалити</a>
                    </div>
                </div>
            </td>
        </tr>
        {% endfor %}

    </tbody>

</table>

{% else %}
<p>Інформація про події провадження ще не внесена</p>
{% endif %}
<div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" id="add-event"
        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Додати подію
    </button>
    <div class="dropdown-menu" id="add-event" aria-labelledby="dropdownMenuButton">
        {% for key,specific in content.items %}
        <a class="dropdown-item" href="{% url 'report_add_detail' report.id key %}">{{ specific.0|capfirst }}</a>
        {% endfor %}
    </div>
</div>


{% endblock content %}
